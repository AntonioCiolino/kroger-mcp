<!-- Location Popup -->
<div id="locationPopup" class="popup-overlay" style="display: none;">
    <div class="popup-content">
        <div class="popup-header">
            <h3>ğŸ“ Find Store Locations</h3>
            <button onclick="closeLocationPopup()" class="popup-close">âœ•</button>
        </div>
        <div class="popup-body">
            <div class="form-group">
                <label for="zipCode">Enter Zip Code:</label>
                <input type="text" id="zipCode" value="45244" placeholder="Enter zip code">
                <button onclick="searchLocations()" class="btn-primary">Search Locations</button>
            </div>
            <div id="locationResults" class="results" style="display: none;"></div>
        </div>
    </div>
</div>

<!-- Cart Panel -->
<div id="cartPanel" class="cart-panel" style="display: none;">
    <div class="cart-panel-header">
        <h3>ğŸ›’ Your Shopping Cart</h3>
        <button data-action="close-cart" class="cart-close-btn">âœ•</button>
    </div>
    <div class="cart-panel-content">
        <div id="cartResults"></div>
    </div>
</div>

<!-- Price Alerts Panel -->
<div id="priceAlertsPanel" class="cart-panel" style="display: none;">
    <div class="cart-panel-header">
        <h3>ğŸ“‰ Price Drop Alerts</h3>
        <button onclick="closePriceAlertsPanel()" class="cart-close-btn">âœ•</button>
    </div>
    <div class="cart-panel-content">
        <!-- Price Alerts Controls -->
        <div class="price-alerts-controls-panel">
            <div class="price-alerts-tabs">
                <button id="alertsTab" class="tab-btn active" onclick="switchPriceAlertsTab('alerts')">
                    ğŸ“‰ Price Alerts
                </button>
                <button id="hiddenTab" class="tab-btn" onclick="switchPriceAlertsTab('hidden')">
                    âš™ï¸ Hidden Products
                </button>
            </div>
            <div class="threshold-controls" id="thresholdControls">
                <label for="thresholdSelect" style="font-size: 12px; margin-right: 5px;">Min. drop:</label>
                <select id="thresholdSelect"
                    style="padding: 4px 8px; font-size: 12px; border-radius: 4px; border: 1px solid #ddd;"
                    onchange="updatePriceAlertThreshold()">
                    <option value="1">1%</option>
                    <option value="2" selected>2%</option>
                    <option value="3">3%</option>
                    <option value="5">5%</option>
                    <option value="10">10%</option>
                    <option value="15">15%</option>
                    <option value="20">20%</option>
                </select>
            </div>
        </div>

        <!-- Price Alerts Content -->
        <div id="priceAlertsContent" class="tab-content active">
            Loading price alerts...
        </div>

        <!-- Hidden Products Content -->
        <div id="hiddenProductsContent" class="tab-content" style="display: none;">
            Loading hidden products...
        </div>
    </div>
</div>

<!-- Product Details Modal -->
<div id="productDetailsModal" class="popup-overlay" style="display: none;">
    <div class="popup-content product-details-modal">
        <div class="popup-header">
            <h3>ğŸ“¦ Product Details</h3>
            <button onclick="closeProductDetails()" class="popup-close">âœ•</button>
        </div>
        <div class="popup-body product-details-content">
            <div id="productDetailsContent">
                <div style="display: flex; flex-direction: column; align-items: center; padding: 40px 20px;">
                    <div class="spinner" style="width: 40px; height: 40px; margin-bottom: 15px;"></div>
                    <p style="color: #666;">Loading product details...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Manual Cart Entry Modal -->
<div id="manualCartEntryModal" class="popup-overlay" style="display: none;">
    <div class="popup-content">
        <div class="popup-header">
            <h3>ğŸ“ Manual Cart Entry</h3>
            <button onclick="closeManualCartEntry()" class="popup-close">âœ•</button>
        </div>
        <div class="popup-body">
            <p>Enter your cart items below. Each line should be in the format:</p>
            <p><code>product_id,quantity</code></p>
            <p>Example: <code>0001111042248,2</code></p>

            <div class="form-group">
                <textarea id="manualCartItems" rows="10" style="width: 100%; padding: 10px; font-family: monospace;"
                    placeholder="0001111042248,2
0001111091188,1
0001111050624,1"></textarea>
            </div>

            <div class="form-actions">
                <button onclick="submitManualCartItems()" class="btn-primary">Import Items</button>
                <button onclick="closeManualCartEntry()" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>
</div><!-- 
Clear Cart Confirmation Modal -->
<div id="clearCartModal" class="clear-cart-modal">
    <div class="clear-cart-modal-content">
        <h3>ğŸ—‘ï¸ Clear Cart Options</h3>
        <p>Choose what you want to clear:</p>
        
        <div class="clear-options">
            <div class="clear-option">
                <h4>ğŸ“± Clear Local Tracking Only</h4>
                <p>Clears only the local cart display. Your actual Kroger cart in the app/website remains unchanged.</p>
                <button class="btn-local" onclick="confirmClearLocalCart()">Clear Local Only</button>
            </div>
            
            <div class="clear-option">
                <h4>ğŸ›’ Clear Actual Kroger Cart</h4>
                <p>Removes all items from your actual Kroger cart (app/website). This action cannot be undone.</p>
                <button class="btn-confirm" onclick="confirmClearCart()">Clear Kroger Cart</button>
            </div>
        </div>
        
        <div class="clear-cart-modal-actions">
            <button class="btn-cancel" onclick="closeClearCartModal()">Cancel</button>
        </div>
    </div>
</div>